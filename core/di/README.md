# DI модуль в core слое

## Назначение
 - Предоставление необходимых интерфейсов, метода расширения, классов для корректной
работы **Dagger 2** во всем проекте

## Описание
- DI модуль разбит на 2 части - **api** и **impl**:
  - **api** - модуль, содержащий интерфейс **Api**, который нужен для объединения всех api в
одну **Map** (см. **ApiResolver**)
  - **impl** - модуль, который инкапсулирует в себе раширения и классы для получения
необходимой реализации **Api**

## Как мне подключить новый модуль в общий DI граф?
- Ваш модуль должен быть разделен на **api** и **impl**
- В обоих модулях делаем папку **di**
- Затем рассмотрим каждый модуль:
  - **api**
    - Содержит интерфейсы того, чего будет провайдить (обычно будет храниться в корне).
Например, **SomeOdooFeature**
    - В **di** папке будет храниться **SomeOdooFeatureApi**, которое **обязательно**
должно быть наследником **Api**, чтобы в последующем можно было достать через **getApi()**
  - **impl**
    - Обычно в корне будет храниться релизация интерфейса **SomeOdooFeature** в виде
**SomeOdooFeatureImpl**
    - В **di** папке будут храниться 3 класса/интерфейса:
      - **SomeOdooFeatureApiProviderModule** 
        - **Dagger** модуль, который предоставляет нашу реализацию **SomeOdooFeatureApi** в общий DI граф. 
        - Не забывайте обязательно в *@Provides* методах добавлять аннотации *@IntoMap* для добавления в общую
**Map** у **ApiResolver** и *@ApiKey(SomeStarFeatureApi::class)* для предоставления необходимого ключа под которым 
будет храниться реализация в **Map**. 
        - **ОБЯЗАТЕЛЬНО** добавляйте **SomeOdooFeatureApiProviderModule** в **OdooAppComponent** в раздел *modules*,
иначе новое **SomeOdooFeatureApi** не добавиться в общую **Map**
      - **SomeOdooFeatureComponent**
        - **Dagger** компонент, который реализует интерфейс **SomeOdooFeatureApi**
        - Как обычный **Dagger** компонент, он может содержать *modules* (**SomeOdooFeatureModule**, например),
который провайдит необходимые реализации **SomeOdooFeatureImpl** и *dependencies* от которых завист. Чаще всего это
будут **Api**, которое можно будет легко получить через **getApi()**
        - **SomeOdooFeatureModule** - **Dagger** модуль, который провайдит **SomeOdooFeatureImpl**